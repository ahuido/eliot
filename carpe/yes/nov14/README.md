```
The Project Gutenberg Etext of ...
...
Title: ...
Author: ...
Release Date: ...
Edition: ...
Language: ...
*** START OF THE PROJECT GUTENBERG ETEXT ... ***
Produced by ...
THE COMPLETE
POETICAL WORKS
OF
PERCY BYSSHE SHELLEY
VOLUME 1
...
PREFACE
...
THOMAS HUTCHINSON.
...
POSTCRIPT.
...
PREFACE BY MRS. SHELLEY.
TO FIRST COLLECTED EDITION ...
...
POSTCRIPT IN SECOND EDITION ...
...
PREFACE BY MRS. SHELLEY.
TO THE VOLUME OF POSTHUMORS POEMS ...
...
MARY W. SHELLEY.
...
***
CONTENTS.
EDITOR'S PREFACE.
MRS. SHELLEY'S PREFACE ...
POSTCRIPT ...
MRS. SHELLEY'S PREFACE ...
THE DAEMON OF THE WORLD. A FRAGMENT.
...
ALASTOR; OR, THE SPIRiT OF SOLITUDE.
NOTE BY MRS. SHELLEY.

THE REVOLT ...
PREFACE.
DEDICATION: ...
...
NOTE BY MRS. SHELLEY.
PRINVE ATHANASE. A FRAGMENT.
...
NOTE BY MRS. SHELLEY.
...
NOTE BY MRS. SHELLEY.
...
PREFACE.
...
NOTE BY MRS. SHELLEY.
...
PREFACE
...
NOTE BY MRS. SHELLEY.
...
NOTE BY MRS. SHELLEY.
...
NOTE BY MRS. SHELLEY.
...
NOTE BY MRS. SHELLEY.
...
NOTE BY MRS. SHELLEY.
...
PREFACE.
...
SHELLEY'S NOTES.
NOTE BY MRS. SHELLEY.
...
***

THE DAEMON OF THE WORLD.
A FRAGMENT.
PART 1.
[Section 1 and 2 of ...
Editor's Introductory Note to ...]

Nec tantum prodere vati,
Quantum scire licet. Venit aetas omnis in unam
...
LUCAN, Phars. v. 176.

How ...
...
...
...

PART 2.
[Section 8 and 9 ...]

...
...
...
Notes:
_87 ...)
***

ALASTOR: OR, THE SPIRIT OF SOLITUDE.
[...]
PREFACE.
...
December 14, 1815.

ALASTOR: OR, THE SPIRIT OF SOLITUDE.
...
...
...
Notes:
_219 ... See "Editor's Notes".
_530 ... See "Editor's Notes".
NOTE ON ALASTOR, BY MRS. SHELLEY.

THE REVOLT OF ISLAM.

A POEM IN TWELVE CANTOS.
...
Pind. Pyth. x.
[...]
AUTHOR'S PREFACE.
...
DEDICATION.
...
TO MARY -- --.
1.
...
2.
...
...
...
NOTES.
_54 ...
CANTO 1.
1.
...
...
...
CANTO 2.
1.
...
...
...
CANTO 3.
...
...
...
NOTES:
_...
_...
CANTO 4.
:::
:::
:::
CANTO 12.
...
NOTE ON ... BY MRS. SHELLEY.
...
'Marlowe, December 11, 1817.
...
[Shelley to Godwin.]
***
PRINCE ATHANASE.
A FRAGMENT.
(...[Mrs. Shelley's Note.])
[...]
PART 1.
...
PART 2.
FRAGMENT 1.
...
FRAGMENT 2.
...
...
FRAGMENT 6.
...
ANOTHER FRAGMENT (A)
...
ANOTHER FRAGMENT (B)
...
NOTES:
...
***
```
> Lines between square brackets, delete (Usually the brackets are separated in multiple lines).
> Five lines before '_5' sign.
> Less than five line after '_\d' sign, up till the next CAPITAL line.
> Fully CAPITALIZED lines, delete.
> Lines begin with '_\d' in the beginning, delete.
> Fragments starts with line r'NOTE.*MRS. SHELLEY.', up till the '***'.
> 


1. Extract fragments with line number signs: '_\d'.
   > Few preperations should be done in the first place:
   - Remove 'NOTE:' lines.
   - Remove '_\d+.*' lines.
   - Remove '[.*]' lines.
   - Remove CAPITALIZED lines.
   - Remove blank lines.
	 > Five lines ahead of '_5' line, marks the beginning of a fragment.
	 > Less than five lines after 
   - Less than five lines after '_\d+' line, there will 
   - 

[Note]: Generate the sequence of '_\d+'s, the sequence can tell the effective lines in this book.
	It's easy to recognize the line starts the fragment. But the ending line requires some technique. The specific sequence executed are essential:
	1. **Replace** CAPITALIZED lines with blank lines.
	2. Remove single blank lines (hope not any two fragments are separated by single blank line at this point).
	3. **Replace** multi-blank lines with single blank line, and fragments are separated by single blank line.
	
	To fullfill this task, several functions should be designed properly:
	
	
2. Clean extracted lines in the following order:
   - 

> This should be contained in one Class definition.
> Tag lines with 'capital', 'nonwords', 'note', 'numbered' or others.
- `def is_capital(line):`'SCENE.--BEFORE THE...'
- `def is_nonwords(line):`'***'
- `def is_note(line):`'_45 may Hunt manuscript; can...'
- `def is_numbered(line):`'Is the unheeded clanking of my chains,      _630'

> Recognize the middle of a fragment (neither the beginning 5 nor the last <=5 lines).
- `def print_middle(line_with_num):`
> Recognize the beginning of a fragment (print the beginning 5 lines to `stdout`).
- `def print_beginning(line_with_5):`
> Recognize the ending of a fragment (print the ending <=5 lines to `stdout`).
- `def print_ending(line_with_):`
> Given a `numbered` line, extract the number, check if the line starts the ending segment of this fragment.
- `def check_ending_segment(line_with_num):`

> Given text of a book. Recognize 
>
> Should maintain a list of current buffer

```
def check_ending_segment(line_with_num):
    # remove  
```